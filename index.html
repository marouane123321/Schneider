<script>
  async function sendMessage() {
    const prompt = document.getElementById("user-input").value.trim();
    if (!prompt) return;

    appendToChat(`أنت: ${prompt}`);

    try {
      const response = await fetch("https://your-render-url.onrender.com/chat", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ prompt })
      });

      const data = await response.json();

      if (data.error) {
        appendToChat(`البوت: خطأ - ${data.error}`);
      } else {
        // حسب صيغة رد Hugging Face
        const botReply = data[0]?.generated_text || "لا يوجد رد";
        appendToChat(`البوت: ${botReply}`);
      }
    } catch {
      appendToChat("البوت: حدث خطأ في الاتصال بالسيرفر.");
    }
  }

  function appendToChat(text) {
    const chatWindow = document.getElementById("chat-window");
    chatWindow.textContent += text + "\n";
    chatWindow.scrollTop = chatWindow.scrollHeight;
  }

  document.getElementById("send-btn").onclick = sendMessage;
</script>
